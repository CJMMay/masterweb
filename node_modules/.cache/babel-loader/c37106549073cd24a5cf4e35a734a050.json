{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\test\\\\project\\\\src\\\\component\\\\edit-message.js\";\nimport React from 'react';\nimport './edit-message.css';\nimport { Upload, Drawer, Form, Button, Col, Row, Input, Icon, message, Modal } from 'antd';\n\nclass Edit extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getBase64 = (img, callback) => {\n      const reader = new FileReader();\n      reader.addEventListener('load', () => callback(reader.result));\n      reader.readAsDataURL(img);\n    };\n\n    this.beforeUpload = file => {\n      const isJPG = file.type === 'image/jpeg';\n\n      if (!isJPG) {\n        message.error('You can only upload JPG file!');\n      }\n\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isLt2M) {\n        message.error('Image must smaller than 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    };\n\n    this.handleChange = info => {\n      if (info.file.status === 'uploading') {\n        this.setState({\n          loading: true\n        });\n        return;\n      }\n\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        this.getBase64(info.file.originFileObj, imageUrl => this.setState({\n          imageUrl,\n          loading: false\n        }));\n      }\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const uploadButton = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: this.state.loading ? 'loading' : 'plus',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Upload\"));\n    const imageUrl = this.state.imageUrl;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"\",\n      icon: \"form\",\n      onClick: this.showDrawer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"\\u7FA4\\u53D1\\u6D88\\u606F\"), React.createElement(Drawer, {\n      title: \"\\u63A8\\u9001\\u6D88\\u606F\\u7F16\\u8F91\",\n      width: 900,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Form, {\n      layout: \"vertical\",\n      hideRequiredMark: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Row, {\n      gutter: 16,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"\\u4FE1\\u606F\\u4E3B\\u9898\\uFF1A\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, getFieldDecorator('MessageName', {\n      rules: [{\n        required: true,\n        message: '请输入信息主题'\n      }]\n    })(React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u4FE1\\u606F\\u4E3B\\u9898\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      gutter: 16,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"\\u5C01\\u9762\\u9996\\u56FE\\uFF1A\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Upload, {\n      name: \"picture\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: false,\n      action: \"https://www.mocky.io/v2/5cc8019d300000980a055e76\",\n      beforeUpload: this.beforeUpload,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, imageUrl ? React.createElement(\"img\", {\n      src: imageUrl,\n      alt: \"avatar\",\n      className: \"messageimg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }) : uploadButton))), React.createElement(Row, {\n      gutter: 16,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"\\u5177\\u4F53\\u5185\\u5BB9:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, getFieldDecorator('description', {\n      rules: [{\n        required: true,\n        message: '请输入文字内容'\n      }]\n    })(React.createElement(Input.TextArea, {\n      rows: 10,\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u5B57\\u5185\\u5BB9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    })))))), React.createElement(\"div\", {\n      className: \"edit-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onClose,\n      style: {\n        marginRight: 8\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Cancel\"), React.createElement(Button, {\n      onClick: this.onClose,\n      type: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Submit\"))));\n  }\n\n}\n\nexport default Form.create()(Edit);","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\test\\project\\src\\component\\edit-message.js"],"names":["React","Upload","Drawer","Form","Button","Col","Row","Input","Icon","message","Modal","Edit","Component","constructor","props","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","beforeUpload","file","isJPG","type","error","isLt2M","size","handleChange","info","status","setState","loading","originFileObj","imageUrl","showDrawer","visible","onClose","state","render","getFieldDecorator","form","uploadButton","rules","required","marginRight","create"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './edit-message.css'\r\nimport { Upload, Drawer, Form, Button, Col, Row, Input, Icon,message,Modal } from 'antd'\r\n\r\n\r\nclass Edit extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loading: false,\r\n        }\r\n    }\r\n    getBase64 = (img, callback) => {\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => callback(reader.result));\r\n        reader.readAsDataURL(img);\r\n    }\r\n    beforeUpload = (file) => {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        if (!isJPG) {\r\n            message.error('You can only upload JPG file!');\r\n        }\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n        if (!isLt2M) {\r\n            message.error('Image must smaller than 2MB!');\r\n        }\r\n        return isJPG && isLt2M;\r\n    }\r\n    handleChange = (info) => {\r\n        if (info.file.status === 'uploading') {\r\n            this.setState({ loading: true });\r\n            return;\r\n        }\r\n        if (info.file.status === 'done') {\r\n            // Get this url from response in real world.\r\n            this.getBase64(info.file.originFileObj, imageUrl =>\r\n                this.setState({\r\n                    imageUrl,\r\n                    loading: false,\r\n                }),\r\n            );\r\n        }\r\n    };\r\n    showDrawer = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    onClose = () => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        const uploadButton = (\r\n            <div>\r\n                <Icon type={this.state.loading ? 'loading' : 'plus'} />\r\n                <div className=\"ant-upload-text\">Upload</div>\r\n            </div>\r\n        );\r\n        const imageUrl = this.state.imageUrl;\r\n        return (\r\n            <div>\r\n                <Button type=\"\" icon=\"form\" onClick={this.showDrawer}>群发消息</Button>\r\n                <Drawer\r\n                    title=\"推送消息编辑\"\r\n                    width={900}\r\n                    \r\n                    onClose={this.onClose}\r\n                    visible={this.state.visible}\r\n                >\r\n                    <Form layout=\"vertical\" hideRequiredMark>\r\n                        <Row gutter={16}>\r\n                                <Form.Item label=\"信息主题：\">\r\n                                    {getFieldDecorator('MessageName', {\r\n                                        rules: [{ required: true, message: '请输入信息主题' }],\r\n                                    })(<Input placeholder=\"请输入信息主题\" />)}\r\n                                </Form.Item>\r\n                           \r\n                        </Row>\r\n                        <Row gutter={16}>\r\n                            <Form.Item label=\"封面首图：\">\r\n                                    <Upload\r\n                                        name=\"picture\"\r\n                                        listType=\"picture-card\"\r\n                                        className=\"avatar-uploader\"\r\n                                        showUploadList={false}\r\n                                        action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                                        beforeUpload={this.beforeUpload}\r\n                                        onChange={this.handleChange}\r\n                                    >\r\n                                        {imageUrl ? <img src={imageUrl} alt=\"avatar\" className='messageimg'/> : uploadButton}\r\n                                    </Upload>\r\n                                </Form.Item>\r\n                        </Row>\r\n                        <Row gutter={16}>\r\n                            <Col span={24}>\r\n                                <Form.Item label=\"具体内容:\">\r\n                                    {getFieldDecorator('description', {\r\n                                        rules: [\r\n                                            {\r\n                                                required: true,\r\n                                                message: '请输入文字内容',\r\n                                            },\r\n                                        ],\r\n                                    })(<Input.TextArea rows={10} placeholder=\"请输入文字内容\" />)}\r\n                                </Form.Item>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form>\r\n                    <div className='edit-footer'>\r\n                        <Button onClick={this.onClose} style={{ marginRight: 8 }}>Cancel</Button>\r\n                        <Button onClick={this.onClose} type=\"primary\">Submit</Button>\r\n                    </div>\r\n                </Drawer>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Form.create()(Edit);"]},"metadata":{},"sourceType":"module"}